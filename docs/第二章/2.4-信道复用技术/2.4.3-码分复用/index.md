# 2.4.3 码分复用（CDMA）

## 码分复用（CDMA - Code Division Multiple Access）

### 原理
- 每个用户分配一个唯一的码片序列（chip sequence）
- 所有用户使用相同的频率，但使用不同的码片序列
- 通过码片序列的正交性来区分不同用户

### 码片序列（Chip Sequence）
- **定义**：将每一个比特时间划分为 $m$ 个短的间隔，每个站被指派一个唯一的 $m$ bit 码片序列
- **特点**：
  - 每个码片序列的长度为 $m$ 位
  - 每个用户分配一个唯一的码片序列
  - 码片序列必须满足正交性

### 向量内积运算（规格化内积）

#### 运算规则
- 为了计算方便，将二进制 `0` 写为 `-1`，`1` 写为 `+1`
- 两个码片序列的内积：对应位相乘后求和
- **规格化内积**：内积结果除以码片序列长度 $m$

#### 正交特性
- **正交性**：任何一个码片向量 $S$ 和其他各站的码片向量 $T$ 的规格化内积为 **0** ($S \cdot T = 0$)
- **自相关**：向量自己和自己的规格化内积为 **1** ($S \cdot S = 1$)
- **反相关**：向量和自己反码的规格化内积为 **-1** ($S \cdot (-S) = -1$)

### 数据识别

#### 发送规则
- **发送比特1**：发送码片序列本身（原码）
- **发送比特0**：发送码片序列的反码（将0写为-1，1写为+1后取反）

#### 接收端分离数据（计算题套路）
- **场景**：接收端收到混合信号 $Rx$（是所有站发送信号的线性叠加）
- **问题**：判断站点 S 发送了什么？
- **计算步骤**：
  1. 将二进制码片序列转换为向量形式（0 → -1，1 → +1）
  2. 计算接收信号 $Rx$ 与站点 S 的码片序列向量 $S$ 的规格化内积：
     $$Result = \frac{1}{m} \sum_{i=1}^{m} (Rx_i \times S_i)$$
     其中 $m$ 是码片序列的长度
- **判决规则**：
  - 结果 = **+1** → S 发送了比特 **1**
  - 结果 = **-1** → S 发送了比特 **0**
  - 结果 = **0** → S **未发送**数据

### 特点
- 所有用户在同一时间使用相同的频带
- 通过码片序列的正交性实现多路复用
- 抗干扰能力强
- 实现复杂度较高

### 应用
- CDMA移动通信系统
- 无线局域网（部分应用）
- 卫星通信

---

## 考试重点：CDMA码分多址的计算（计算题必考）

### 典型考题
> 共有四个站 A, B, C, D。
> A 的码片序列为：$(-1 -1 -1 +1 +1 -1 +1 +1)$
> 现接收端收到的总信号序列 $S$ 为：$(-1 +1 -3 +1 -1 -3 +1 +1)$
> 问：站点 A 是否发送了数据？如果发送了，是 0 还是 1？

### 解题思路

#### 核心公式
规格化内积：$$Result = \frac{1}{m} (S \cdot A) = \frac{1}{m} \sum_{i=1}^{m} (S_i \times A_i)$$

其中 $m$ 是码片序列的长度（本题中 $m = 8$）

#### 计算过程

**步骤一**：对应位相乘
- $S_1 \times A_1 = (-1) \times (-1) = +1$
- $S_2 \times A_2 = (+1) \times (-1) = -1$
- $S_3 \times A_3 = (-3) \times (-1) = +3$
- $S_4 \times A_4 = (+1) \times (+1) = +1$
- $S_5 \times A_5 = (-1) \times (+1) = -1$
- $S_6 \times A_6 = (-3) \times (-1) = +3$
- $S_7 \times A_7 = (+1) \times (+1) = +1$
- $S_8 \times A_8 = (+1) \times (+1) = +1$

**步骤二**：求和
$$1 - 1 + 3 + 1 - 1 + 3 + 1 + 1 = 8$$

**步骤三**：除以码片序列长度
$$Result = \frac{8}{8} = +1$$

#### 判决标准（必须背诵）
- 结果为 **+1** → 发送了比特 **1**
- 结果为 **-1** → 发送了比特 **0**
- 结果为 **0** → **未发送**数据

#### 答案
站点 A 发送了数据，发送的是比特 **1**。

### 解题技巧

1. **先转换格式**：如果题目给出的是二进制（0和1），先转换为向量形式（0 → -1，1 → +1）
2. **逐位相乘**：对应位置相乘，不要遗漏任何一位
3. **求和并除以m**：这是规格化内积的关键步骤
4. **根据结果判断**：严格按照判决标准（+1/0/-1）来判断

### 常见错误
- 忘记除以码片序列长度 $m$（导致结果不是 ±1 或 0）
- 对应位相乘时符号搞错
- 混淆发送规则（发送1是原码，发送0是反码）

