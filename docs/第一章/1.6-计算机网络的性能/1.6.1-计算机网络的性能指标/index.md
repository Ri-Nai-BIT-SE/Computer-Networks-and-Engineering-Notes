# 1.6.1 计算机网络的性能指标

## 1. 速率（Rate/Data Rate）
- **定义**：数据的传送速率，也称比特率
- **单位**：bit/s (b/s, bps)、kb/s、Mb/s、Gb/s
- **注意**：
  - 速率通常指额定速率或标称速率
  - 在描述速率时，k/M/G 通常指 $10^3, 10^6, 10^9$
  - 而在存储容量中通常指 $2^{10}, 2^{20}, 2^{30}$

## 2. 带宽（Bandwidth）
- **频域含义**：信号具有的频带宽度，单位是Hz（赫兹）
- **时域含义**：网络中某通道传送数据的能力，表示单位时间内网络中的某信道所能通过的"最高数据率"，单位是bit/s
- **带宽越大，数据传输速率越高**

## 3. 吞吐量（Throughput）
- **定义**：单位时间内通过某个网络（或信道、接口）的数据量
- **特点**：受网络带宽和网络额定速率的限制
- **实际吞吐量**：往往小于额定速率

## 4. 时延（Delay）- 重点
时延是数据从网络的一端传送到另一端所需的时间。

### 发送时延（传输时延，Transmission Delay）
- **定义**：主机或路由器发送数据帧所需要的时间
- **计算公式**：发送时延 = 数据帧长度(bit) / 发送速率(bit/s)
- **发生在**：机器内部的发送器中
- **关键理解**：取决于**网卡/带宽**，与距离无关
- **易错点**：发送时延和传播时延是**两个完全不同的概念**，不能混淆

### 传播时延（Propagation Delay）
- **定义**：电磁波在信道中传播一定距离需要花费的时间
- **计算公式**：传播时延 = 信道长度(m) / 电磁波在信道上的传播速率(m/s)
- **传播速率**：光纤/铜线中速率约为 $2.0 \sim 2.3 \times 10^8 m/s$
- **发生在**：信道链路上
- **关键理解**：取决于**距离/介质**，与带宽无关
- **易错点**：
  - 提高链路带宽（发送速率）只能减小发送时延，**不能减小传播时延**
  - 传播时延只与距离和传播介质有关

### 处理时延
- **定义**：主机或路由器在收到分组时要花费一定的时间进行处理
- **包括**：分析分组首部、提取数据部分、进行差错检验、查找路由等

### 排队时延
- **定义**：分组在路由器输入输出队列中排队等待处理的时间
- **取决于**：网络当时的通信量

### 总时延
总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延

### ⚠️ 时延计算的重难点与陷阱

#### 1. 单位换算陷阱（考试易错点）
- **数据量（存储）**：通常以 $2$ 为底
  - $1\text{KB} = 2^{10}\text{B} = 1024\text{B}$
  - $1\text{MB} = 2^{20}\text{B} = 1024\text{KB}$
  - $1\text{GB} = 2^{30}\text{B} = 1024\text{MB}$
- **通信速率（带宽）**：通常以 $10$ 为底
  - $1\text{kbps} = 10^3\text{bps} = 1000\text{bps}$
  - $1\text{Mbps} = 10^6\text{bps} = 1000\text{kbps}$
  - $1\text{Gbps} = 10^9\text{bps} = 1000\text{Mbps}$
- **做题原则**：
  - 如果题目没有明确说明，通常**速率按 $1000$ 进位，存储按 $1024$ 进位**
  - 计算时一定要**统一单位**，建议都换算成 bit 和 bps

#### 2. 典型计算题示例
**题目**：忽略处理和排队时延，计算发送 $100\text{MB}$ 数据通过 $1000\text{km}$ 光纤的总时间。假设带宽为 $100\text{Mbps}$，信号传播速率为 $2 \times 10^8 \text{m/s}$。

**解题步骤**：
1. **统一单位**：
   - 数据量：$100\text{MB} = 100 \times 1024 \times 1024 \times 8 = 838,860,800 \text{bit}$
   - 带宽：$100\text{Mbps} = 100 \times 10^6 = 100,000,000 \text{bps}$
   - 距离：$1000\text{km} = 1,000,000 \text{m}$

2. **计算发送时延**：
   - 发送时延 = $838,860,800 / 100,000,000 = 8.388608 \text{s}$

3. **计算传播时延**：
   - 传播时延 = $1,000,000 / (2 \times 10^8) = 0.005 \text{s} = 5 \text{ms}$

4. **总时延**：
   - 总时延 = $8.388608 + 0.005 = 8.393608 \text{s}$

**注意**：在这个例子中，发送时延远大于传播时延，这是常见情况。

## 5. 时延带宽积
- **定义**：传播时延 × 带宽
- **物理意义**：表示链路中可以容纳多少个比特
- **单位**：bit

## 6. 往返时间RTT（Round-Trip Time）
- **定义**：从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间
- **包括**：传播时延、处理时延、排队时延等
- **应用**：TCP协议中用于设置超时重传时间

### RTT与有效吞吐率（停止-等待协议）
- **场景**：在**停止-等待协议**中，发送方发送一个分组后，必须等待确认才能发送下一个分组
- **有效数据率公式**：
  $$
  \text{有效数据率} = \frac{\text{数据长度}}{\text{发送时间} + \text{RTT}}
  $$
- **关键理解**：
  - 当 RTT 很大时（如卫星通信），信道利用率会非常低
  - 即使带宽很高，有效数据率也会受到 RTT 的限制
- **典型题目**：计算在停止-等待协议下，发送 $1000\text{bit}$ 数据，带宽 $1\text{Mbps}$，RTT $500\text{ms}$ 的有效数据率
  - 发送时间 = $1000 / 10^6 = 0.001\text{s} = 1\text{ms}$
  - 有效数据率 = $1000 / (0.001 + 0.5) = 1000 / 0.501 \approx 1996 \text{bps}$
  - 信道利用率 = $1996 / 10^6 = 0.1996\%$（非常低！）

## 7. 利用率
- **信道利用率**：某信道有百分之几的时间是被利用的
- **网络利用率**：全网络的信道利用率的加权平均值
- **利用率公式**：$D = D_0 / (1 - U)$
  - $D$：网络当前的时延
  - $D_0$：网络空闲时的时延
  - $U$：网络的利用率（0 < U < 1）
- **结论**：利用率越高，时延越大

