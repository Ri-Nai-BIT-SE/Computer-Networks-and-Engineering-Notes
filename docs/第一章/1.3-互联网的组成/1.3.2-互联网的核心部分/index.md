# 1.3.2 互联网的核心部分

## 组成
- **组成**：由大量网络和连接这些网络的**路由器**组成
- **作用**：为边缘部分提供服务（连通性 + 交换）

## 路由器的作用
- **关键设备**：**路由器（Router）**
- **任务**：**转发收到的分组**（分组交换）
- **核心功能**：实现网络互连和数据转发

## 网络设备的层次（综合应用题考点）

### 设备所在的层次
不同网络设备工作在不同的OSI层次：

1. **集线器（Hub）**
   - **工作层次**：**物理层（第1层）**
   - **特点**：傻瓜设备，只负责信号放大和转发
   - **功能**：将所有端口连接在一起，形成共享介质
   - **缺点**：不能隔离冲突域，所有端口共享带宽

2. **交换机（Switch）**
   - **工作层次**：**数据链路层（第2层）**
   - **特点**：智能设备，根据MAC地址表转发
   - **功能**：学习MAC地址，建立MAC地址表，根据目的MAC地址转发帧
   - **优点**：可以隔离冲突域，每个端口独享带宽

3. **路由器（Router）**
   - **工作层次**：**网络层（第3层）**
   - **特点**：根据IP地址和路由表转发
   - **功能**：连接不同网络，根据IP路由表转发数据报
   - **优点**：可以隔离广播域和冲突域

### 典型考题
**题目1**：哪个设备能隔离广播域？

**答案**：**路由器**。只有路由器工作在网络层，可以根据IP地址隔离不同的网络（广播域）。

**题目2**：哪个设备只能隔离冲突域？

**答案**：**交换机**。交换机工作在第2层，可以隔离冲突域，但不能隔离广播域。

**题目3**：集线器、交换机、路由器分别工作在哪一层？

**答案**：
- 集线器：物理层（第1层）
- 交换机：数据链路层（第2层）
- 路由器：网络层（第3层）

### 默认网关（Default Gateway）

#### 概念
- **定义**：默认网关就是主机所在的本地局域网通往外部世界的**第一个路由器**（第一跳）
- **作用**：当主机要访问不在同一局域网内的目标时，数据包会先发送到默认网关，由网关转发到外部网络

#### 为什么需要配置网关？
- **原因**：不配置网关，数据包就**出不去局域网**，无法访问互联网
- **工作原理**：
  1. 主机检查目标IP地址是否在同一网段
  2. 如果在同一网段，直接发送（使用ARP获取MAC地址）
  3. 如果不在同一网段，发送到默认网关（路由器的IP地址）
  4. 路由器根据路由表转发到下一跳

#### 典型考题
**题目**：为什么配置IP地址时必须配置默认网关？

**答案要点**：
1. 默认网关是主机所在局域网通往外部世界的第一个路由器
2. 当主机要访问不在同一局域网的目标时，数据包必须通过默认网关转发
3. 不配置网关，主机只能访问同一局域网内的设备，无法访问互联网

## 三种交换技术

### 电路交换（Circuit Switching）
- **原理**：建立连接 → 通话 → 释放连接，通话期间**独占**资源
- **优点**：
  - 传输大量连续数据时效率高
  - 实时性强
  - 传输时延小
- **缺点**：
  - 建立连接时间长
  - 线路利用率低（突发性数据会导致资源浪费）
  - 灵活性差

### 报文交换（Message Switching）
- **原理**：存储转发整个报文
- **优点**：
  - 无需建立连接
  - 线路利用率高
- **缺点**：
  - 报文过大导致时延大
  - 缓存空间要求高
  - 不适合实时通信

### 分组交换（Packet Switching）
- **原理**：**存储转发**，将报文切分成较小的**分组（Packet）**，每个分组独立选择路径
- **优点**：
  - **高效**（动态分配带宽）
  - **灵活**（独立路由）
  - **迅速**（无连接）
  - **可靠**
  - 线路利用率高
- **缺点**：
  - 排队时延
  - 不保证带宽
  - 增加头部开销

## 三种交换技术的比较
| 交换方式 | 原理 | 优点 | 缺点 |
|---------|------|------|------|
| **电路交换** | 建立连接→通话→释放连接，独占资源 | 传输大量连续数据时效率高；实时性强 | 建立连接时间长；线路利用率低 |
| **报文交换** | 存储转发整个报文 | 无需建立连接 | 报文过大导致时延大；缓存空间要求高 |
| **分组交换** | 存储转发，将报文切分成分组，独立路由 | 高效、灵活、迅速、可靠 | 排队时延；不保证带宽；增加头部开销 |

## 为什么互联网主要采用分组交换？（考试重点）

### 核心原因分析
1. **计算机数据的突发性特点**
   - 计算机通信具有**突发性**：大部分时间不发送数据，但一旦发送，数据量很大
   - 电路交换需要独占资源，在空闲时会造成资源浪费
   - 分组交换可以**动态分配带宽**，多个用户共享链路

2. **线路利用率高**
   - 电路交换：即使没有数据传输，线路也被占用，利用率低
   - 分组交换：多个分组可以共享同一条链路，提高利用率

3. **灵活性和可靠性**
   - 分组可以独立选择路径（路由），网络更灵活
   - 某个链路故障时，分组可以绕行，提高可靠性

4. **无需建立连接**
   - 分组交换无需像电路交换那样先建立连接
   - 适合突发性数据传输

### 典型考题
**题目**：为什么计算机网络（互联网）主要采用分组交换而不是电路交换？

**答案要点**：
- 计算机数据具有突发性，电路交换独占资源导致利用率低
- 分组交换可以动态分配带宽，多个用户共享链路，线路利用率高
- 分组交换更灵活，分组可以独立选择路径
- 分组交换无需建立连接，适合突发性数据传输
- 分组交换更可靠，某个链路故障时分组可以绕行

## 结论
- 互联网的核心部分采用**分组交换**技术

