# 3.5.1 信道划分协议 (Channel Partitioning Protocols)

这类协议通过将共享信道在物理上划分为多个子信道，并将每个子信道**静态地、永久地**分配给一个用户，从而从根本上避免了冲突。

### 核心概念

#### 1. 频分多路复用 (FDM - Frequency Division Multiplexing)

*   **原理**: 
    *   将整个信道的**频带**划分为多个互不重叠的子频带。
    *   每个用户分配一个子频带进行通信。

*   **特点**: 
    *   所有用户可以**同时**使用信道。
    *   但在不同的**频率**上。

*   **示例**: 
    *   传统收音机广播，每个电台使用一个固定的频率。
    *   有线电视，每个频道占用一个频带。

*   **优点**: 
    *   无冲突。
    *   适合持续传输的应用。

*   **缺点**: 
    *   如果某个用户空闲，其分配的频带也无法被其他用户使用，造成浪费。

**示意图**：
```
频率
 ↑
 |  用户4 ┃━━━━━━━━━━┃
 |  用户3 ┃━━━━━━━━━━┃
 |  用户2 ┃━━━━━━━━━━┃
 |  用户1 ┃━━━━━━━━━━┃
 └────────────────────→ 时间
```

#### 2. 时分多路复用 (TDM - Time Division Multiplexing)

*   **原理**: 
    *   将**时间**划分为一系列重复的**帧 (Frame)**。
    *   每个帧再划分为 N 个**时隙 (Time Slot)**。
    *   每个用户分配到一个固定的时隙进行通信。

*   **特点**: 
    *   所有用户在同一个频率上通信。
    *   但在不同的**时间片**内。

*   **优点**: 
    *   无冲突。
    *   公平分配时间资源。

*   **缺点**: 
    *   **时隙浪费严重**。
    *   即使某个用户没有数据要发送，分配给他的时隙也会被**空闲浪费**。
    *   无法灵活适应突发性数据传输。

**示意图**：
```
TDM 帧
┌──────────────────────────┐
│时隙1│时隙2│时隙3│时隙4│...│
│用户1│用户2│用户3│用户4│   │
└──────────────────────────┘
        ↓ 循环重复
┌──────────────────────────┐
│时隙1│时隙2│时隙3│时隙4│...│
│用户1│用户2│用户3│用户4│   │
└──────────────────────────┘
```

#### 3. 波分多路复用 (WDM - Wavelength Division Multiplexing)

*   **原理**: 
    *   本质上是**光纤上的频分复用**。
    *   将光纤的频带划分为多个不同**波长**（颜色）的信道。
    *   每个波长承载一路光信号。

*   **特点**: 
    *   极大地提高了光纤的传输容量。
    *   现代光纤通信系统可以支持数十甚至上百个波长同时传输。

*   **应用**: 
    *   长途光纤通信。
    *   高速骨干网络。

*   **技术**:
    *   **密集波分复用 (DWDM - Dense WDM)**: 波长间隔很小，可以复用更多信道。
    *   **粗波分复用 (CWDM - Coarse WDM)**: 波长间隔较大，成本较低。

#### 4. 码分多路复用 (CDMA - Code Division Multiple Access)

*   **原理**: 
    *   这是最复杂的一种多路复用技术。
    *   不划分时间或频率。
    *   所有用户可以在**同一时间、同一频率**上发送数据。

*   **核心技术**: 
    *   为每个用户分配一个唯一的、伪随机的**码片序列 (Chipping Sequence)**。
    *   这些序列之间是**正交 (Orthogonal)** 的。

##### CDMA 工作原理

**a. 码片序列的正交性**

*   每个站被指定一个唯一的 $m$ 位码片序列。
*   如果用 `+1` 表示二进制 `1`，用 `-1` 表示二进制 `0`。
*   任意两个不同站的码片序列**正交**，即它们的**规格化内积为 0**。

**示例**：
```
站点A的码片序列: (-1, -1, -1, +1, +1, -1, +1, +1)
站点B的码片序列: (-1, -1, +1, -1, +1, +1, +1, -1)

内积 = [(-1)×(-1) + (-1)×(-1) + (-1)×(+1) + (+1)×(-1) 
       + (+1)×(+1) + (-1)×(+1) + (+1)×(+1) + (+1)×(-1)] / 8
     = [1 + 1 - 1 - 1 + 1 - 1 + 1 - 1] / 8
     = 0 / 8 = 0  ✓ 正交
```

**b. 发送过程**

*   **发送比特 1**: 发送方发送自己的码片序列（原样）。
*   **发送比特 0**: 发送方发送自己的码片序列的**反码**（所有位取反）。
*   **不发送**: 发送全 `0` 序列。

**示例**（站点 A）：
```
数据比特: 1  →  发送: (-1, -1, -1, +1, +1, -1, +1, +1)
数据比特: 0  →  发送: (+1, +1, +1, -1, -1, +1, -1, -1)
```

**c. 接收过程**

*   接收方收到的是**所有发送站点信号的叠加**。
*   为了提取某个站点（如站点 A）的数据：
    1.  将收到的混合信号与站点 A 的码片序列进行**内积**运算。
    2.  **结果判断**:
        *   内积 = `+1` → 站点 A 发送了比特 `1`
        *   内积 = `-1` → 站点 A 发送了比特 `0`
        *   内积 = `0` → 站点 A 没有发送数据

**示例**：
```
站点 A 发送: 1 → SA = (-1, -1, -1, +1, +1, -1, +1, +1)
站点 B 发送: 0 → SB = (+1, +1, -1, +1, -1, -1, -1, +1)
站点 C 发送: 1 → SC = (-1, +1, -1, +1, +1, +1, -1, -1)

信道上的混合信号 = SA + SB + SC
                 = (-1, +1, -3, +3, +1, -1, -1, +1)

接收方要提取站点 A 的数据:
内积 = [(-1)×(-1) + (+1)×(-1) + (-3)×(-1) + (+3)×(+1) 
       + (+1)×(+1) + (-1)×(-1) + (-1)×(+1) + (+1)×(+1)] / 8
     = [1 - 1 + 3 + 3 + 1 + 1 - 1 + 1] / 8
     = 8 / 8 = 1  → 站点 A 发送了比特 1 ✓
```

*   **关键**: 由于码片序列的正交性，其他站点的信号对内积结果的贡献为 0，从而实现了信号的分离。

##### CDMA 的优缺点

*   **优点**: 
    *   抗干扰能力强。
    *   保密性好（需要知道码片序列才能解码）。
    *   频谱利用率高。
    *   支持软切换（移动通信中）。

*   **缺点**: 
    *   实现复杂。
    *   需要精确的功率控制（远近效应问题）。
    *   码片序列的设计和分配较困难。

*   **应用**: 
    *   3G 移动通信 (WCDMA, CDMA2000)。
    *   GPS 全球定位系统。

### 信道划分协议的总体评价

#### 优点

*   **公平**: 每个用户都得到固定的资源份额。
*   **无冲突**: 从根本上避免了信道冲突。
*   **高负载时效率稳定**: 当所有用户都在传输时，信道利用率高。

#### 缺点

*   **低负载时效率低下**: 
    *   如果只有一个用户活跃，他也只能使用分配给他的 $1/N$ 的资源。
    *   造成巨大浪费。
*   **灵活性差**: 
    *   无法适应突发性数据传输。
    *   资源分配固定，难以动态调整。

### 易考点 & 难点

*   **易考点**:
    *   四种多路复用技术的名称和基本原理（FDM、TDM、WDM、CDMA）。
    *   信道划分协议的共同优缺点。
    *   理解 CDMA 允许多个用户同时使用同一频率的原理。

*   **难点**:
    *   **CDMA 的工作原理**: 
        *   这是本节的**绝对重点和难点**。
        *   必须理解码片序列的正交性如何让多个用户在同一信道上互不干扰地通信。
        *   重点是理解：
            1. 编码过程（数据比特 × 码片序列）
            2. 解码过程（混合信号 · 码片序列）
            3. 为什么正交性保证了信号分离
    *   **CDMA 的计算**: 
        *   能够根据给定的码片序列和数据比特，计算出发送的信号。
        *   能够从混合信号中通过内积运算提取特定站点的数据。
        *   这是常见的计算题类型。
