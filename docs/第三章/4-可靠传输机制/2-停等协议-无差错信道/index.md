# 3.4.2 停-等协议 (无差错信道)

现在我们放宽一个假定，引入**流量控制 (Flow Control)** 的概念。

### 核心概念

#### 1. 协议的假定

*   **保留假定 1**: 信道仍然是**无差错、不丢帧**的理想信道。
*   **去掉假定 2**: 接收方的处理速率**有限**，可能来不及处理快速到达的数据。

#### 2. 问题与解决方案

##### 问题：缓存溢出

*   如果发送方连续不断地发送数据，接收方的缓存区很快就会被填满。
*   后续到达的帧无处存放而被丢弃。
*   即使信道完全可靠，也会因为接收方处理能力不足而导致数据丢失。

##### 解决方案：引入反馈机制

*   接收方每正确接收并处理完一帧后，向发送方回送一个**确认帧 (ACK - Acknowledgement)**。
*   发送方在发送完一帧后，必须**停止**发送，并**等待**接收到对方的ACK。
*   收到 ACK 后，才能发送下一帧。

这个简单的"**发一帧，等一帧**"的机制就是**停-等协议 (Stop-and-Wait Protocol)**。

#### 3. 协议工作流程

```
发送方                          接收方
  |                               |
  |------- 发送帧 0 ------------->|
  |                               | (接收并处理)
  |<------ 发送 ACK --------------|
  |                               |
  |------- 发送帧 1 ------------->|
  |                               | (接收并处理)
  |<------ 发送 ACK --------------|
  |                               |
  |           ...                 |
```

#### 4. 协议本质：流量控制

*   **核心机制**: 通过 ACK 机制，发送方的发送速率被接收方的处理速率所控制。
*   **控制原理**: 
    *   接收方处理得慢，ACK 回得就慢。
    *   发送方也就发送得慢。
*   **意义**: 这是网络中最基本的一种**流量控制方法**。

#### 5. 协议特点

*   **优点**:
    *   简单易实现。
    *   有效防止接收方缓存溢出。
    *   发送速率自动适应接收方处理能力。

*   **缺点**:
    *   信道利用率低（大部分时间在等待）。
    *   没有考虑信道会出错的情况。

### 易考点 & 难点

*   **易考点**:
    *   理解停-等协议解决的核心问题是**流量控制**。
    *   掌握协议的基本工作流程：发送 → 等待 → 接收 ACK → 发送下一帧。
    *   认识到这个协议仍然假设信道无差错。

*   **难点**:
    *   认识到这是一个简化的模型，它还没有考虑信道会出错的情况。
    *   理解流量控制的本质：通过反馈机制协调发送速率和接收速率。
    *   区分流量控制和差错控制的不同作用。
