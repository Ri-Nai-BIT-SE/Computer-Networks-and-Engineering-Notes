# 3.3 差错检测和纠正

由于物理信道存在噪声等干扰，数据在传输过程中可能会发生比特翻转（`0`变`1`或`1`变`0`），导致差错。本节探讨如何检测甚至纠正这些差错。

### 核心概念

#### 1. 差错类型与原因

*   **差错**: 接收的数据与发送的数据不一致。
*   **类型**:
    *   **随机差错 (Random Error)**: 单个比特的错误，与其他比特无关。主要由**热噪声**引起。
    *   **突发差错 (Burst Error)**: 相邻的多个数据位连续出错。主要由**冲击噪声**（如电磁干扰）引起，这是通信中差错的主要形式。
*   **评价指标**:
    *   **误码率 (BER - Bit Error Rate)**: 传输错误的比特数占总传输比特数的比率。
        *   $Pe = Ne / N$ (其中 $Ne$ 是错误比特数，$N$ 是总比特数)

#### 2. 差错控制基本方式

*   **检错 (Error Detection)**: 在接收端**发现**数据中存在差错，但不知道具体是哪一位错了。
*   **纠错 (Error Correction)**: 在接收端不仅能发现差错，还能**定位并纠正**错误。

*   **主要技术**:
    1.  **反馈纠错 (ARQ - Automatic Repeat reQuest)**:
        *   接收端检测到差错后，通过反馈信道请求发送端**重传**数据。
        *   这是计算机网络中**最常用**的方式。适用于双向通信。
    2.  **前向纠错 (FEC - Forward Error Correction)**:
        *   在发送的数据中加入足够的冗余信息，使得接收端可以直接纠正一定范围内的差错，无需重传。
        *   适用于单向通信或实时性要求高的场景（如卫星通信）。
        *   开销大，编码复杂。

#### 3. 误码控制基本原理

*   **核心思想**: **增加冗余 (Redundancy)**。在原始数据（$m$位）的基础上，按一定规则增加一些冗余码（$r$位），构成一个总长为 $n=m+r$ 位的新码字。
*   **海明距离 (Hamming Distance)**:
    *   定义：两个等长码字之间，对应位置上比特值不同的位的数量。例如，`10001001` 和 `10110001` 的海明距离是3。
    *   **编码的最小海明距离**: 一个编码方案中，任意两个合法码字之间海明距离的最小值，记为 $d$。
    *   **检错与纠错能力**:
        *   若要**检测**最多 $e$ 个比特的错误，则要求最小海明距离 $d \geq e + 1$。
        *   若要**纠正**最多 $t$ 个比特的错误，则要求最小海明距离 $d \geq 2t + 1$。

#### 4. 常用检错编码

*   **奇偶校验码 (Parity Check)**:
    *   **原理**: 在数据位后附加1位校验位，使得整个码字中`1`的个数为奇数（奇校验）或偶数（偶校验）。
    *   **能力**: 最小海明距离 $d=2$。根据公式，它能**检测1位错误** ($e=1, 2 \geq 1+1$)，但**不能纠错** ($t=0, 2 < 2*0+1$)。它也无法检测出偶数个比特的错误。
    *   **优点**: 简单。 **缺点**: 检错能力弱。

*   **循环冗余码 (CRC - Cyclic Redundancy Code)**:
    *   **原理**:
        1.  发送方和接收方约定一个**生成多项式** $G(x)$（对应一个二进制数，如 $x^4+x+1$ 对应 `10011`）。设 $G(x)$ 的阶为 $r$。
        2.  **发送端**:
            *   在 $m$ 位的原始数据 $M$ 后面附加 $r$ 个 `0`。
            *   用 $G$ 对这个 $m+r$ 位的数做**模2除法**（即异或运算，不进位不借位）。
            *   得到的 $r$ 位余数就是**帧检验序列 (FCS)**。
            *   将这个 FCS 附加到原始数据 $M$ 的末尾（或替换掉附加的$r$个`0`）发送出去。
        3.  **接收端**:
            *   用同样的 $G$ 去除接收到的整个码字。
            *   如果余数为`0`，则认为数据**无差错**。
            *   如果余数不为`0`，则认为数据**有差错**，丢弃该帧。
    *   **优点**: **检错能力极强**，实现简单（可用硬件移位寄存器实现），广泛应用于以太网、HDLC、PPP等。
    *   **能力**: 可以检测出所有单个错误、奇数个错误、所有长度小于等于 $r$ 的突发错误，以及绝大多数更长的突发错误。

#### 5. 常用纠错编码

*   **海明码 (Hamming Code)**:
    *   **原理**: 一种可以纠正一位错误的前向纠错码。它通过在数据位的特定位置插入多个校验位，使得每个校验位都对一组特定的数据位进行奇偶校验。
    *   **校验位位置**: 位于 $2^k$ 的位置（1, 2, 4, 8, ...）。
    *   **纠错过程**: 接收端根据所有校验位的值重新计算出一个"指误码"，该码的值直接指出了出错比特的位置。如果为0，则无错。

### 易考点 & 难点

*   **易考点**:
    *   差错的类型和主要原因。
    *   ARQ与FEC的定义和区别。
    *   海明距离与检错/纠错能力的关系式。
    *   奇偶校验的能力（检1位错，不能纠错）。
    *   CRC的名称、应用和基本原理。
*   **难点**:
    *   **CRC的计算**: 这是**本章计算题的绝对重点**。必须熟练掌握模2除法（长除法）的步骤，能够根据给定的数据和生成多项式，正确计算出FCS。
    *   **海明码的编码与纠错**: 理解校验位的分布规则和分组校验的原理。能够根据给定的数据计算出海明码，或者根据接收到的错误码字找出并纠正错误位。
    *   **海明距离的定理应用**: 给定一个编码的最小海明距离，能够判断其最大检错位数和最大纠错位数。
