# 4.6.1 基本概念

## 1. 路由选择的本质

### 两大功能区分

- **转发 (Forwarding)**: 数据层面。路由器根据转发表将收到的IP数据报从合适的端口转发出去（硬件实现，快）。
- **路由选择 (Routing)**: 控制层面。根据路由算法生成路由表，进而生成转发表（软件实现，复杂）。

### 理想路由算法特点

- 正确完整
- 计算简单
- 自适应（能适应网络故障和拓扑变化）
- 稳定
- 公平
- 最佳

## 2. 分层次的路由选择协议

### 背景

互联网规模太大，且各单位对隐私和管理策略要求不同，因此不能使用单一的路由协议。

### 自治系统 AS (Autonomous System)

在单一技术管理下的许多网络、IP地址及路由器的集合。AS内部使用统一的路由策略，对外部表现为单一实体。

### 两大类协议

1. **内部网关协议 IGP (Interior Gateway Protocol)**:
   - 在 **AS 内部** 使用。
   - 追求：**最有效的** 路由（最短路径）。
   - 常见协议：**RIP** (小型网络), **OSPF** (大型网络)。

2. **外部网关协议 EGP (External Gateway Protocol)**:
   - 在 **AS 之间** 使用。
   - 追求：**可达性** 和 **策略性**（不一定最佳，但要无环路且符合政策）。
   - 现用版本：**BGP-4**。

