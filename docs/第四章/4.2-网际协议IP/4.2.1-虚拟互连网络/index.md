# 4.2.1 虚拟互连网络（Virtual Internetwork）

## 一、提出背景：为什么需要虚拟互连网络？

现实中的计算机网络是**异构的**，不同网络在以下方面存在差异：

- 寻址方案不同
- 最大分组长度不同
- 网络接入机制不同
- 差错控制、超时控制不同
- 路由选择方法不同
- 管理与控制方式不同

👉 **结论**：
不存在一种"统一的物理网络"可以满足所有需求，也不适应技术发展。

---

## 二、实现网络互连的两种思路

### 1️⃣ **所有网络都采用同一种技术**

- ❌ 不现实
- ❌ 不灵活
- ❌ 不利于技术演进

### 2️⃣ **使用中间设备进行互连（正确做法）** ✅

---

## 三、网络互连中使用的中间设备（按层次）

| 层次 | 中间设备 | 作用 |
| :--- | :--- | :--- |
| 物理层 | 转发器（Repeater） | 信号放大 |
| 数据链路层 | 网桥、交换机 | 扩展局域网 |
| **网络层** | **路由器（Router）** | **实现网络互连** ⭐ |
| 运输层及以上 | 网关（Gateway） | 协议转换 |

⚠️ **注意重点**：

- 转发器 / 网桥 / 交换机
  - 👉 只是扩大一个网络，**不叫网络互连**
- **只有使用路由器连接的，才叫网络互连**

---

## 四、什么是"虚拟互连网络"？

> **虚拟互连网络 = 用 IP 协议把多个异构网络连接起来后，在逻辑上形成的一个统一网络**

📌 特点：

- **从用户和主机的角度看**：
  - 好像所有主机都在**同一个网络中**
  - 看不到底层各个网络的差异
- **底层实际上**：
  - 由多个不同类型的网络 + 路由器组成
- 这是一个**逻辑上的网络（虚拟的）**

---

## 五、IP 网（IP 网络）的概念

- 使用 **IP 协议** 进行互连形成的虚拟网络，称为 **IP 网**
- IP 网屏蔽了：
  - 网络类型差异
  - MAC 地址差异
  - 链路层细节

📌 **重要结论（常考）**：

> 当在 IP 网之上使用 TCP 协议时，就构成了今天的 **Internet**

---

## 六、分组在虚拟互连网络中的传送方式

- 分组传送采用：
  - **存储转发**
  - **逐跳（hop by hop）转发**
- 每一跳：
  - 路由器只关心 **目的 IP 地址**
  - 决定下一跳该往哪转

📌 两种交付方式：

- **直接交付**：源主机 → 目的主机（同一网络）
- **间接交付**：源主机 → 多个路由器 → 目的主机（不同网络）

---

## 七、本节一句话总结（考试用）

> **虚拟互连网络是通过路由器和 IP 协议，把多个异构的物理网络在逻辑上统一起来，使主机通信时"看起来像在同一个网络中"的网络。**
